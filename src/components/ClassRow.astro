---
import type { ClassSession, Trainer } from "../data/schemas";

interface Props {
    classSession: ClassSession;
    trainer: Trainer | undefined;
}

const { classSession: c, trainer } = Astro.props;

const intensityColors = {
    Low: "bg-blue-400",
    Moderate: "bg-flux",
    High: "bg-volt",
    Extreme: "bg-signal",
};
---

<div
    class="group relative p-6 bg-armor border border-white/5 rounded-sm hover:border-volt/30 transition-all duration-300"
>
    <div class="flex justify-between items-start mb-6">
        <div>
            <span
                class="inline-block px-2 py-0.5 bg-void text-volt text-[10px] font-black uppercase tracking-[0.2em] mb-3 border border-volt/20"
            >
                {c.type}
            </span>
            <h3
                class="font-heading font-black text-xl uppercase tracking-tighter text-white group-hover:text-volt transition-colors"
            >
                {c.name}
            </h3>
        </div>
        <div class="text-right">
            <span class="block text-xl font-black text-white">{c.time}</span>
            <span class="block text-[10px] text-muted uppercase font-bold"
                >{c.duration} MIN</span
            >
        </div>
    </div>

    <div class="flex items-center gap-3 mb-6">
        <div
            class="w-8 h-8 rounded-full bg-void border border-white/10 flex items-center justify-center overflow-hidden"
        >
            {
                trainer?.image ? (
                    <img
                        src={trainer.image}
                        alt={trainer.name}
                        class="w-full h-full object-cover"
                    />
                ) : (
                    <svg
                        class="w-4 h-4 text-muted"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                        />
                    </svg>
                )
            }
        </div>
        <div>
            <span class="block text-[10px] text-muted uppercase font-bold"
                >Trainer</span
            >
            <span class="block text-xs text-white font-bold"
                >{trainer?.name ?? "Unknown"}</span
            >
        </div>
    </div>

    <div class="flex items-center justify-between pt-4 border-t border-white/5">
        <div class="flex items-center gap-2">
            <div class={`w-2 h-2 rounded-full ${intensityColors[c.intensity]}`}>
            </div>
            <span
                class="text-[10px] text-muted uppercase font-black tracking-widest"
                >{c.intensity} Intensity</span
            >
        </div>
        <span
            class={`text-[10px] font-black uppercase tracking-widest ${c.spotsLeft <= 5 ? "text-signal" : "text-flux"}`}
        >
            {c.spotsLeft} Spots Left
        </span>
    </div>

    <a href={`#`} class="absolute inset-0 z-10" aria-label={`Book ${c.name}`}
    ></a>
</div>
