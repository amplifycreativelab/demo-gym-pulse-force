---
import { Image } from "astro:assets";

interface Program {
  title: string;
  description: string;
  image: ImageMetadata;
  href: string;
  color: string;
}

interface Props {
  programs: Program[];
}

const { programs } = Astro.props;
---

<div class="bento-grid grid grid-cols-1 md:grid-cols-3 gap-6">
  {
    programs.map((program, i) => (
      <a
        href={program.href}
        class:list={[
          "bento-item group relative overflow-hidden rounded-sm border border-white/5 bg-armor transition-all duration-500",
          i === 0 ? "md:col-span-2 md:row-span-2 aspect-[16/10]" : "aspect-square",
        ]}
      >
        <!-- Background Image -->
        <div class="absolute inset-0 transition-transform duration-700 group-hover:scale-105">
           <Image 
             src={program.image} 
             alt={program.title}
             class="w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity duration-500"
             width={800} 
           />
        </div>

        <!-- Background Overlay (Gradient) -->
        <div 
          class="absolute inset-0 opacity-40 group-hover:opacity-60 transition-opacity duration-700 pointer-events-none mix-blend-multiply"
          style={`background: radial-gradient(circle at center, ${program.color}, transparent 80%)`}
        ></div>
        
        <!-- Darkening Overlay for text readability -->
        <div class="absolute inset-0 bg-gradient-to-t from-void via-void/50 to-transparent opacity-80"></div>

        <!-- Content -->
        <div class="absolute inset-0 p-8 flex flex-col justify-end z-10">
          <h3 class="font-heading font-black text-3xl uppercase tracking-tighter mb-2 text-white group-hover:text-volt transition-colors relative z-20">
            {program.title}
          </h3>
          <p class="text-muted text-sm max-w-xs group-hover:text-white/90 transition-colors relative z-20">
            {program.description}
          </p>
          
          <!-- View More indicator -->
          <div class="mt-6 flex items-center gap-2 text-volt text-xs font-bold uppercase tracking-widest opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300">
            Explore Program
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </div>
        </div>

        <!-- Edge Light -->
        <div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent z-30"></div>
        <div class="absolute bottom-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/5 to-transparent z-30"></div>
      </a>
    ))
  }
</div>

<style>
  .bento-grid:hover .bento-item:not(:hover) {
    opacity: 0.5;
    filter: blur(2px) grayscale(0.5);
    transform: scale(0.98);
  }

  .bento-item {
    box-shadow: 0 4px 24px -1px rgba(0, 0, 0, 0.4);
  }
  
  .bento-item:hover {
    box-shadow: 0 12px 48px -1px rgba(0, 0, 0, 0.6);
    border-color: rgba(255, 255, 255, 0.1);
  }
</style>
